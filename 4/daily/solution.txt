допустим такой пример
1 2 3
1 2 3 4

1 1 2 2 3 3 4

размер 7
середина общего 7 / 2 = 3

ищем середину первого l + r / 2 = 0 + 2 / 2 = 1
ищем оффсет второго half_total - 1 = 3 - 1 = 2

1 [2] 3
1 2 [3] 4

[2] должна быть меньше 4
[3] должен быть меньше или равен чем 3

